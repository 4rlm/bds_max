<h1 class="page-header">Indexer</h1>
<h4 class="text-center">Links Directory (Main URLs and Redirects, Staff Pages, Location Pages) </h4>
<br>


<!-- FILTER PARTIAL -->
<%= render partial: 'filter' %>
<h4>Total Indexer Accounts: <%= number_with_delimiter(@indexer_count) %></h4>
<h4>Selected Indexer Accounts: <%= number_with_delimiter(@selected_indexers_count) %></h4>

<%= render partial: 'buttons' %>
<br>


<% num = 0 %>
<% @indexers.each do |indexer| %>
<% num +=1 %>

<div id="core-detail" class="text-nowrap geo-result-table">

    <div class="row profile-row">
        <div class="profile-col col-md-12">

            <!-- <table class="table table-bordered indexer-table no-wrap"> -->
            <table class="table table-bordered indexer-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Indexer Status</th>

                        <th>Redirect</th>
                        <th>WhoIs</th>
                        <th>Template</th>
                        <th>PF Staff</th>
                        <th>PF Staff</th>

                        <th>PF Location</th>
                        <th>PF Location</th>

                        <th>RT-MS</th>
                        <th>CS</th>
                        <th>Geo</th>
                    </tr>
                </thead>

                <tbody>
                    <tr>
                        <td><%= num %></td>
                        <td><%= indexer.indexer_status %></td>

                        <!-- URL indexer_indicator -->
                          <td class="<%= indexer_indicator(indexer.raw_url, indexer.clean_url) %>"><%= indexer.redirect_status %></td>

                          <!-- who_status -->
                          <td class="<%= indexer_indicator(indexer.raw_url, indexer.clean_url) %>"><%= indexer.who_status %></td>

                          <!-- Template -->
                          <td><%= indexer.template %></td>

                          <!-- Staff Text / URL -->
                          <td class="<%= match_sts_ind(indexer.stf_status) %>">
                              <%= link_to indexer.staff_url, :target => "_blank", class: 'tooltips', title: "#{indexer.staff_url}", data: { toggle: 'tooltip', placement: 'top'} do %>
                              <%= indexer.staff_text %>
                              <% end %>
                          </td>

                          <!-- Staff Status -->
                          <td class="<%= match_sts_ind(indexer.stf_status) %>"><%= indexer.stf_status %></td>

                        <!-- Loc Text / URL -->
                        <td class="<%= match_sts_ind(indexer.loc_status) %>">
                            <%= link_to indexer.location_url, :target => "_blank", class: 'tooltips', title: "#{indexer.location_url}", data: { toggle: 'tooltip', placement: 'top'} do %>
                                <%= indexer.location_text %>
                            <% end %>
                        </td>

                      <!-- Loc Status -->
                      <td class="<%= match_sts_ind(indexer.loc_status) %>"><%= indexer.loc_status %></td>

                    <!-- RT Status -->
                    <td><%= indexer.rt_sts %></td>
                    <td><%= indexer.contact_status %></td>
                    <td><%= indexer.geo_status %></td>

                    </tr>
                </tbody>
            </table>

            <table class="table table-bordered indexer-table">
                <tr> <!-- REGISTRANT INFO -->
                    <th>Clean URL</th>
                    <th>Raw URL</th>
                    <th>Clean URL IDs</th>
                </tr>

                <tr>
                  <!-- Clean URL -->
                  <td class="<%= indexer_indicator(indexer.raw_url, indexer.clean_url) %>">
                      <%= link_to indexer.clean_url, :target => "_blank" do %>
                          <%= indexer.clean_url %>
                      <% end %>
                  </td>
                  <!-- Raw URL -->
                  <td class="<%= indexer_indicator(indexer.raw_url, indexer.clean_url) %>">
                      <%= link_to indexer.raw_url, :target => "_blank" do %>
                          <%= indexer.raw_url %>
                      <% end %>
                  </td>
                  <td><%= indexer.clean_url_crm_ids %></td>
                </tr>

            </table>
            <table class="table table-bordered indexer-table">
                <tr>
                    <th>Account Name</th>
                    <th>CRM Acct IDs</th>
                </tr>
                <tr>
                    <td><%= indexer.acct_name %></td>
                    <td><%= indexer.crm_acct_ids %></td>
                </tr>
            </table>


            <table class="table table-bordered indexer-table">
                <tr> <!-- REGISTRANT INFO -->
                    <th>Full Address</th>
                    <th>Addr Pin</th>
                    <th>Addr Pin IDs</th>
                </tr>

                <tr>
                    <td><%= indexer.full_addr %></td>
                      <td><%= indexer.acct_pin %></td>
                      <td><%= indexer.acct_pin_crm_ids %></td>
                </tr>

            </table>


            <table class="table table-bordered indexer-table">
                <tr> <!-- REGISTRANT INFO -->

                    <th>Phone</th>
                    <th>Phones</th>
                    <th>CRM Ph IDs</th>
                </tr>

                <tr>
                    <td><%= indexer.phone %></td>
                    <td><%= indexer.phones %></td>
                    <td><%= indexer.crm_ph_ids %></td>
                </tr>

            </table>

            <table class="table table-bordered indexer-table">
                <tr> <!-- REGISTRANT INFO -->
                    <th>100% Match</th>
                    <th>75% Match</th>
                    <th>50% Match</th>
                    <th>25% Match</th>
                </tr>

                <tr>
                    <td><%= indexer.score100 %></td>
                    <td><%= indexer.score75 %></td>
                    <td><%= indexer.score50 %></td>
                    <td><%= indexer.score25 %></td>
                </tr>

            </table>

        </div> <!-- /.profile-col col-md-12 -->
    </div> <!-- /.row profile-row -->
</div> <!-- /#core-detail -->

<br>


            <% end %>


<%= render partial: 'buttons' %>
<%= will_paginate @indexers, renderer: BootstrapPagination::Rails  %>
