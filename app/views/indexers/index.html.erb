<h1 class="page-header">Indexer</h1>
<h4 class="text-center">Links Directory (Main URLs and Redirects, Staff Pages, Location Pages) </h4>
<br>

<%= link_to "1. Template Finder", template_finder_btn_path, class: 'btn btn-warning' %>
<%= link_to "2. Page Finder", page_finder_btn_path, class: 'btn btn-warning' %>
<%= link_to "3. Account Scraper", rooftop_data_getter_btn_path, class: 'btn btn-warning' %>
<%= link_to "4. Contact Scraper", cs_data_getter_btn_path, class: 'btn btn-warning' %>
<%= link_to "5. Meta Scraper", meta_scraper_btn_path, class: 'btn btn-warning' %>
<%= link_to "Error Resetter", reset_errors_btn_path, class: 'btn btn-warning' %>
<%= link_to "Power Button", indexer_power_btn_path, class: 'btn btn-warning' %>
<br>

<!-- FILTER PARTIAL -->
<%= render partial: 'filter' %>
<%= render partial: 'buttons' %>

<div class="row profile-row">
    <div class="profile-col col-md-12">
        <table class="table table-bordered indexer-table">
          <thead>
            <tr>
                <!-- <th><%#= check_box_tag 'check_all', 'check_all', false, onClick: 'checkAll(this);' %></th> -->
                <th>#</th>
                <th>Indexer Status</th>
                <th>Redirect status</th>
                <th>Template</th>
                <th>Staff Status</th>
                <th>Loc Status</th>
                <th>RT Status</th>
                <th>Contact Status</th>
                <th>Account Name</th>

                <th>Full Address</th>
                <th>Street</th>
                <th>City</th>
                <th>State</th>
                <th>Zip</th>
                <th>Phone</th>

                <th>Staff text</th>
                <th>Location text</th>
              <th>Clean url</th>
              <th>Raw url</th>
              <th>Crm id arr</th>
              <th colspan="1"></th>
            </tr>
          </thead>

          <tbody>
            <% num = 0 %>
            <% @indexers.each do |indexer| %>
              <tr>
                  <!-- <td><%#= check_box_tag "multi_checks[]",  indexer.id %></td> -->

                  <% num +=1 %>
                  <td><%= num %></td>
                  <td><%= indexer.indexer_status %></td>
                  <!-- URL indexer_indicator -->
                    <td class="<%= indexer_indicator(indexer.raw_url, indexer.clean_url) %>"><%= indexer.redirect_status %></td>
                    <!-- Template -->
                    <td><%= indexer.template %></td>
                    <!-- Staff Status -->
                    <td class="<%= match_sts_ind(indexer.stf_status) %>"><%= indexer.stf_status %></td>
                    <!-- Loc Status -->
                    <td class="<%= match_sts_ind(indexer.loc_status) %>"><%= indexer.loc_status %></td>
                  <!-- RT Status -->
                  <td><%= indexer.rt_sts %></td>
                  <td>
                      <%# if Staffer.where(domain: indexer.clean_url).count > 0 %>
                      <%= indexer.contacts_count %>
                          <%#= link_to indexer.contact_status, staffers_path(url: indexer.clean_url), target: "_blank" %>
                          <%#= link_to "hey", "/staffers?url=https%3A%2F%2F#{indexer.clean_url}", target: "_blank" %>
                      <%# else %>
                          <!-- NO Same URL -->
                      <%# end %>
                  </td>

                  <td><%= indexer.acct_name %></td>
                  <td><%= indexer.full_addr %></td>
                  <td><%= indexer.street %></td>
                  <td><%= indexer.city %></td>
                  <td><%= indexer.state %></td>
                  <td><%= indexer.zip %></td>
                  <td><%= indexer.phone %></td>

                  <!-- Staff Text / URL -->
                  <td class="<%= match_sts_ind(indexer.stf_status) %>">
                      <%= link_to indexer.staff_url, :target => "_blank", class: 'tooltips', title: "#{indexer.staff_url}", data: { toggle: 'tooltip', placement: 'top'} do %>
                      <%= indexer.staff_text %>
                      <% end %>
                  </td>
                  <!-- Loc Text / URL -->
                  <td class="<%= match_sts_ind(indexer.loc_status) %>">
                      <%= link_to indexer.location_url, :target => "_blank", class: 'tooltips', title: "#{indexer.location_url}", data: { toggle: 'tooltip', placement: 'top'} do %>
                          <%= indexer.location_text %>
                      <% end %>
                  </td>
                <!-- Clean URL -->
                <td class="<%= indexer_indicator(indexer.raw_url, indexer.clean_url) %>">
                    <%= link_to indexer.clean_url, :target => "_blank" do %>
                        <%= indexer.clean_url %>
                    <% end %>
                </td>
                <!-- Raw URL -->
                <td class="<%= indexer_indicator(indexer.raw_url, indexer.clean_url) %>">
                    <%= link_to indexer.raw_url, :target => "_blank" do %>
                        <%= indexer.raw_url %>
                    <% end %>
                </td>
                <td><%= indexer.crm_id_arr %></td>


                <!-- <td><%#= link_to 'Show', indexer %></td> -->
                <% if advanced_and_up %>
                    <td><%= link_to 'Edit', edit_indexer_path(indexer) %></td>
                <% end %>
                <% if admin_only %>
                    <!-- <td><%#= link_to 'Destroy', indexer, method: :delete, data: { confirm: 'Are you sure?' } %></td> -->
                <% end %>
              </tr>
            <% end %>
          </tbody>
        </table>
    </div>
</div>

<%= render partial: 'buttons' %>
<%= will_paginate @indexers, renderer: BootstrapPagination::Rails  %>